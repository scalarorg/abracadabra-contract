# Upcoming Roadmap For Abracadabra

## What We Did

We have deployed the following core contracts on Sepolia testnet:

1. DegenBox
   > Degenbox is a vault for tokens. The stored tokens can be flashloaned or used in strategies - the yield from this will go to the token depositors.
   > Cauldrons are built on top of both BentoBox and Degenbox, which allow users to reduce transaction fees as well as allow the creation of multiple strategies for the assets held inside.
1. CauldronV4

   > Contain methods such as `deposit()` and `repay()` for clients to start the flow.

   - It is deployed directly and then used as a masterContract to deploy each market, as clones, following the minimal proxy pattern.
   - Currently deployed a single market, sBTCMarket, which is a clone of CauldronV4.

1. ScalarCoin

   > Act as stablecoin like MIM. It is used in the CauldronV4 contract as a base token for the market.

1. Proxy Oracles

   > Oracles enable cauldrons to price the collateral and are a crucial part of the abracadabra infrastructure. Each cauldron has it's own oracle.

   - We currently use FixedPriceOracle for sBTCMarket. It is a simple oracle that returns a fixed price for the collateral.
   - This oracle should be replaced with a more sophisticated oracle represent sBTC rate exchange in the future.

## Future Components

1. Strategies
1. MIMSwap
1. Swapper

## Strategies

> Strategies take an investment from the DegenBox and manage a yield generating operation. The DegenBox owner sets a strategy per token.

- Currently, Abracadabra has two strategy contracts: [GmStrategy](https://github.com/Abracadabra-money/abracadabra-money-contracts/blob/main/src/strategies/GmStrategy.sol) and [StargateLPStrategy](https://github.com/Abracadabra-money/abracadabra-money-contracts/blob/main/src/strategies/StargateLPStrategy.sol)

- However, do not see any actual interaction with these strategies in the UI.

### References

1. [Strategies Docs](https://dev.abracadabra.money/core-contracts/strategies)

## MIMSwap

> MagicLP liquidity pools are the core components of the MIMSwap system. They facilitate token swaps, liquidity provision, and yield generation.

### Here's how Liquidity Pools works in general

1. **Liquidity Pools**: In a DEX like Uniswap or SushiSwap, users can provide liquidity to a pool by depositing a pair of assets (e.g., ETH and DAI). This pool is used to facilitate trading on the platform.

1. **Issuance of LP Tokens**: When a user adds their assets to the pool, they receive LP tokens in return. These tokens represent their proportionate share of the total liquidity in the pool. For example, if a user contributes 10% of the total assets in the pool, they will receive LP tokens that represent 10% of the pool.

1. **Earning Rewards**: LP tokens entitle the holder to a portion of the trading fees generated by the pool. The fees are distributed to all LP token holders based on their share of the pool.

1. **Redemption**: The LP tokens can be redeemed to withdraw the user's share of the liquidity pool, including any fees earned.

1. **Staking**: In some DeFi platforms, LP tokens can also be staked in yield farming protocols to earn additional rewards, like governance tokens or other incentives.

### Key Functions in MagicLP

1. Swapping Tokens
1. Adding Liquidity
1. Removing Liquidity
1. Query Functions

### Notes

Abaracadabra currently has 4 liquidity pools:

1. `MIM-USDB` on `Blast`
1. `MIM-USDT` on `Arbitrum`
1. `MIM-USDC` on `Arbitrum`
1. `MIM-USDT` on `KAVA`

#### Deployment Instructions

- MagicLP contract use the Proxy pattern. First deploy MagicLP as an implementation contract. Then deploy a proxy contract which points to the implementation contract. The proxy contract is the one that is interacted with by users and is initialized by calling the `init()` function.
- For example, we can pass ScalarCoin address and a self-deployed USDT address to the `init()` function to initialize the MagicLP contract (just for simulation purposes, our USDT has no value).

#### Frontend Integration

Add neccessary configs to this [folder](https://github.com/scalarorg/abracadabra/tree/main/src/configs/pools)

### References

1. [MIMSwap Docs](https://dev.abracadabra.money/core-contracts/mimswap)
1. [MIMSwap Pools UI](https://app.abracadabra.money/#/pools)
1. [MIMSwap Token Swap UI](https://app.abracadabra.money/#/mim-swap)
1. [MIMSwap Contract](https://github.com/Abracadabra-money/abracadabra-money-contracts/tree/main/src/mimswap)

## Swappers

> Swappers are a contract that allows users to perform a swap as part of the series of operation they bundle together when they 'cook' a transaction with Abracadabra.

- It is often used in 3 contexts: Leverage, Deleverage and Liquidations, to swap collateral and MIM.
- There are some [swapper contracts](https://github.com/Abracadabra-money/abracadabra-money-contracts/tree/main/src/swappers) interacting with Curve, Uniswap, Stargate, Yearn,...
- These contracts are classified as periphery contracts so they should be handle last.

### References

1. [Swappers Docs](https://dev.abracadabra.money/periphery-contracts/swappers)
